<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GZCMS 简体中文 UTF8 版</title>
    <link rel="stylesheet" type="text/css" href="<gz$smarty.const.__PUBLIC__>
	/css/hdjs.css?v=1">
	<link rel="stylesheet" type="text/css" href="<gz$smarty.const.__PUBLIC__>/css/install.css?v=1">
	<script type="text/javascript" src="<gz$smarty.const.__PUBLIC__>/js/jquery-1.8.2.min.js"></script>
	<script type="text/javascript" src="<gz$smarty.const.__PUBLIC__>/js/hdjs.js"></script>
</head>
<body>
<div class="step">
    <div class="bg"></div>
    <div class="environment">

        <div class="title">GZCMS 安装向导</div>
        <div class="process">
            <ul>
                <li>许可协议</li>
                <li class="current">环境检测</li>
                <li>数据库设定</li>
                <li>生成数据</li>
                <li>安装完成</li>
            </ul>
        </div>
        <!--协议说明-->
        <div class="install">
            <div class="check set">
                <table width="100%">
                    <tr>
                        <th class="w250">环境检测</th>
                        <th>当前状态</th>
                    </tr>
                    <tr>
                        <td>服务器域名</td>
                        <td><gz$smarty.server.HTTP_HOST></td>
                    </tr>
                    <tr>
                        <td>服务器解译引擎</td>
                        <td><gz$smarty.server.SERVER_SOFTWARE></td>
                    </tr>
                    <tr>
                        <td>PHP版本</td>
                        <td><gz$smarty.const.PHP_VERSION></td>
                    </tr>
                    <tr>
                        <td>系统安装目录</td>
                        <td><gz$smarty.const.ROOT_PATH></td>
                    </tr>
                    </tr>
                </table>
            </div>

            <div class="check set">
                <table>
                    <tr>
                        <th class="w250">需开启的变量或函数</th>
                        <th class="w80">当前状态</th>
                        <th>说明</th>
                    </tr>
                    <tr>
                        <td>safe_mode</td>
                        <td><gz$safe></td>
                        <td> <span class="desc">
                        本系统不支持在非win主机的安全模式下运行
                    </span></td>
                    </tr>
                    <tr>
                        <td>GD 库</td>
                        <td><gz$gd></td>
                        <td> <span class="desc">
                        不支持将导致与图片相关的功能无法使用
                    </span></td>
                    </tr>
                    <tr>
                        <td>CURL库</td>
                        <td><gz$curl></td>
                        <td> <span class="desc">
                        不符合要求将导致采集、远程资料本地化等功能无法使用
                    </span></td>
                    </tr>
                    <tr>
                        <td>MySQLI扩展</td>
                        <td><gz$mysqli></td>
                        <td> <span class="desc">
                        不支持将无法使用本系统
                    </span></td>
                    </tr>
                    <tr>
                        <td>mb_substr</td>
                        <td><gz$mb_substr></td>
                        <td> <span class="desc">
                        不支持将导致中文字符处理出现问题
                    </span></td>
                    </tr>
                </table>
            </div>
            <div class="check set">
                <table>
                    <tr>
                        <th class="w250">目录、文件权限检查</th>
                        <th class="w100">写入</th>
                        <th>读取</th>
                    </tr>
                    <gzforeach from=$dirctory item=d>
                        <tr>
                            <td><gz$d></td>
                            <td><gzif is_writable($d)><span class="hd-validate-success">可写</span><gzelse><span class="hd-validate-error">不可写</span><gz/if>
                            <td><gzif is_readable($d)><span class="hd-validate-success">可读</span><gzelse><span class="hd-validate-error">不可读</span>'<gz/if></td>
                            </td>
                        </tr>
                    <gz/foreach>
                </table>
            </div>
        </div>
        <!--协议说明-->
        <div class="btn">
            <button class="hd-btn" onclick="<gz$smarty.const.__APP__>?m=install&a=copyright">上一步</button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="hd-btn hd-btn-primary" onclick="check();">下一步</button>
        </div>
    </div>
</div>
<script>
    function check() {
        if ($(".hd-validate-error").length > 0) {
            alert("您的系统环境不可以安装HDCMS");
            return false;
        } else {
            location.href = "<gz$smarty.const.__APP__>?m=install&a=database";
        }
    }
</script>
</body>
</html>